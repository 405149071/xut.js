{"version":3,"file":"0.983a0773966cbdd07a30.hot-update.js","sources":["webpack:///./src/lib/scenario/layout.js?c73c"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.home = home;\nexports.scene = scene;\nexports.navMenu = navMenu;\n\nvar _index = require('../config/index');\n\nvar round = Math.round; /**\r\n                         * 布局文件\r\n                         * 1 控制条\r\n                         * 2 导航栏\r\n                         * @param  {[type]} config [description]\r\n                         * @return {[type]}        [description]\r\n                         */\n\nvar ratio = 6;\nvar isIOS = Xut.plat.isIOS;\nvar TOP = isIOS ? 20 : 0;\n\nvar getOptions = function getOptions() {\n    var iconHeight = _index.config.iconHeight;\n    var proportion = _index.config.proportion;\n    var calculate = proportion.calculateContainer();\n\n    //横版模式\n    var isHorizontal = _index.config.layoutMode == 'horizontal';\n\n    proportion = isHorizontal ? proportion.width : proportion.height;\n    iconHeight = isIOS ? iconHeight : round(proportion * iconHeight);\n\n    return {\n        isHorizontal: isHorizontal,\n        iconHeight: iconHeight,\n        sWidth: calculate.width,\n        sHeight: calculate.height,\n        sTop: calculate.top,\n        sLeft: calculate.left,\n        calculate: calculate,\n        proportion: proportion\n    };\n};\n\n/**\r\n * 首页布局\r\n * @return {[type]} [description]\r\n */\nfunction home() {\n\n    var options = getOptions();\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n    var iconHeight = options.iconHeight;\n    var calculate = options.calculate;\n    var isHorizontal = options.isHorizontal;\n\n    var navBarWidth = isHorizontal ? '100%' : Math.min(sWidth, sHeight) / (isIOS ? 8 : 3) + 'px';\n    var navBarHeight = isHorizontal ? round(sHeight / ratio) : round((sHeight - iconHeight - TOP) * 0.96);\n    var navBarTop = isHorizontal ? '' : iconHeight + TOP + 2 + 'px';\n    var navBarLeft = isHorizontal ? '' : iconHeight + 'px';\n    var navBarBottom = isHorizontal ? '4px' : '';\n    var navBaroOverflow = isHorizontal ? 'hidden' : 'visible';\n\n    //导航\n    var navBarHTML = '<div class=\"xut-navbar\" \\n              style=\"width:' + navBarWidth + ';\\n                     height:' + navBarHeight + 'px;\\n                     top:' + navBarTop + ';\\n                     left:' + navBarLeft + ';\\n                     bottom:' + navBarBottom + ';\\n                     background-color:white;\\n                     border-top:1px solid rgba(0,0,0,0.1);\\n                     overflow:' + navBaroOverflow + ';\">\\n        </div>';\n\n    var homeWidth = _index.config.viewSize.width;\n    var homeHeight = _index.config.viewSize.height;\n    var homeTop = calculate.top;\n    var homeLeft = calculate.left;\n    var homeIndex = Xut.sceneController.createIndex();\n    var homeOverflow = _index.config.scrollPaintingMode ? 'visible' : 'hidden';\n\n    //主体\n    var homeHTML = '<div id=\"xut-main-scene\" \\n              class=\"xut-chapter\" \\n              style=\"width:' + homeWidth + 'px;\\n                     height:' + homeHeight + 'px;\\n                     top:' + homeTop + 'px;\\n                     left:' + homeLeft + 'px;\\n                     overflow:hidden;\\n                     z-index:' + homeIndex + ';\\n                     overflow:' + homeOverflow + ';\">\\n\\n            <div id=\"controlBar\" class=\"xut-control-bar hide\"></div>\\n            <ul id=\"xut-page-container\" class=\"xut-flip\"></ul>\\n            <ul id=\"xut-master-container\" class=\"xut-master xut-flip\"></ul>\\n            ' + navBarHTML + '\\n            <div id=\"toolTip\"></div>\\n        </div>';\n\n    return String.styleFormat(homeHTML);\n}\n\n/**\r\n * [scene 创建场景]\r\n * @param  {[type]} options [description]\r\n * @return {[type]}         [description]\r\n */\nfunction scene(id) {\n\n    var options = getOptions();\n\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n    var calculate = options.calculate;\n\n    var html = '<div id=\"{{id}}\" style=\"' + 'width:{{width}}px;' + 'height:{{height}}px;' + 'top:{{top}}px;' + 'left:{{left}}px;' + 'position:absolute;' + 'z-index:{{zIndex}};' + 'overflow:{{overflow}};' + '\">' + ' <ul id=\"{{pageId}}\" class=\"xut-flip\" style=\"z-index:{{zIndexPage}}\"></ul>' + ' <ul id=\"{{masterId}}\" class=\"xut-flip\" style=\"z-index:{{zIndexMaster}}\"></ul>' + '</div>';\n\n    return _.template(html, {\n        id: 'scenario-' + id,\n        width: _index.config.viewSize.width,\n        height: _index.config.viewSize.height,\n        top: calculate.top,\n        left: calculate.left,\n        zIndex: Xut.sceneController.createIndex(),\n        overflow: _index.config.scrollPaintingMode ? 'visible' : 'hidden',\n        pageId: 'scenarioPage-' + id,\n        zIndexPage: 2,\n        masterId: 'scenarioMaster-' + id,\n        zIndexMaster: 1\n    });\n}\n\nvar getNavOptions = function getNavOptions() {\n\n    //导航菜单宽高\n    var navHeight = void 0,\n        navWidth = void 0;\n    var options = getOptions();\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n    var proportion = options.proportion;\n    var isHorizontal = options.isHorizontal;\n\n    //横版模版\n    if (isHorizontal) {\n        navHeight = round(sHeight / ratio);\n    } else {\n        navWidth = Math.min(sWidth, sHeight) / (isIOS ? 8 : 3);\n        navHeight = round((sHeight - options.iconHeight - TOP) * 0.96);\n    }\n\n    return {\n        sWidth: sWidth,\n        sHeight: sHeight,\n        navHeight: navHeight,\n        navWidth: navWidth,\n        proportion: proportion\n    };\n};\n\n/**\r\n * 获得css配置数据\r\n * @param  {[type]} seasonlist [description]\r\n * @return {[type]}            [description]\r\n */\nvar getWrapper = function getWrapper(seasonlist) {\n\n    var width = void 0,\n        height = void 0,\n        blank = void 0,\n        scroller = void 0,\n        contentstyle = void 0,\n        containerstyle = void 0,\n        overwidth = void 0,\n        overHeigth = void 0;\n\n    //获得css配置数据\n    var options = getNavOptions();\n    var font = round(options.proportion * 2);\n\n    var navWidth = options.navWidth;\n    var navHeight = options.navHeight;\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n\n    if (_index.config.layoutMode == 'horizontal') {\n        height = round(navHeight * 0.9);\n        width = round(height * sWidth / sHeight); //保持缩略图的宽高比\n        blank = round(navHeight * 0.05); //缩略图之间的间距\n        scroller = 'width:' + seasonlist * (width + blank) + 'px>';\n        contentstyle = 'float:left;width:' + width + 'px;height:' + height + 'px;margin-left:' + blank + 'px';\n        containerstyle = 'width:96%;height:' + height + 'px;margin:' + blank + 'px auto;font-size:' + font + 'em';\n        //横版左右滑动\n        //溢出长度+上偏移量\n        overwidth = width * seasonlist + seasonlist * blank;\n    } else {\n        width = round(navWidth * 0.9);\n        height = round(navWidth * 1.1);\n        blank = round(navWidth * 0.05);\n        contentstyle = 'width:' + width + 'px;height:' + height + 'px;margin:' + blank + 'px auto;border-bottom:1px solid rgba(0,0,0,0.3)';\n        containerstyle = 'height:' + (navHeight - 4) + 'px;overflow:hidden;margin:2px auto;font-size:' + font + 'em';\n        //竖版上下滑动\n        overHeigth = height * seasonlist + seasonlist * blank;\n    }\n\n    return {\n        contentstyle: contentstyle,\n        containerstyle: containerstyle,\n        overwidth: overwidth,\n        overHeigth: overHeigth,\n        scroller: scroller\n    };\n};\n\n/**\r\n * 导航菜单\r\n * @param  {[type]} seasonSqlRet [description]\r\n * @return {[type]}              [description]\r\n */\nfunction navMenu(results) {\n\n    var seasonlist = results.length;\n    var options = getWrapper(seasonlist);\n\n    var list = '';\n    var seasonId = void 0;\n    var chapterId = void 0;\n    var data = void 0;\n    var xxtlink = void 0;\n\n    for (var i = 0; i < seasonlist; i++) {\n        data = results[i];\n        seasonId = data.seasonId;\n        chapterId = data._id;\n        xxtlink = seasonId + '-' + chapterId;\n        list += '<li style=\"' + options.contentstyle + '\">;\\n                <div class=\"xut-navBar-box\" data-xxtlink=\"' + xxtlink + '\">\\n                    ' + (i + 1) + '\\n                </div>\\n           </li>';\n    }\n\n    //导航\n    var navHTML = '<div id=\"xut-nav-wrapper\" style=\"' + options.containerstyle + '\">\\n            <div style=\"width:' + options.overwidth + 'px;\\n                                           height:' + options.overHeigth + 'px;\\n                                           ' + options.scroller + '\">\\n                <ul id=\"xut-nav-section-list\">\\n                    ' + list + '\\n                </ul>\\n            </div>\\n        </div>';\n\n    return String.styleFormat(navHTML);\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/scenario/layout.js\n ** module id = 44\n ** module chunks = 0\n **/"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;","sourceRoot":""}