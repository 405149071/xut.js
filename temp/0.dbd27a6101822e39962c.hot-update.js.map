{"version":3,"file":"0.dbd27a6101822e39962c.hot-update.js","sources":["webpack:///./src/lib/scenario/layout.js?c73c"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.home = home;\nexports.scene = scene;\nexports.nav = nav;\n\nvar _index = require('../config/index');\n\nvar round = Math.round; /**\r\n                         * 布局文件\r\n                         * 1 控制条\r\n                         * 2 导航栏\r\n                         * @param  {[type]} config [description]\r\n                         * @return {[type]}        [description]\r\n                         */\n\nvar ratio = 6;\nvar isIOS = Xut.plat.isIOS;\nvar TOP = isIOS ? 20 : 0;\n\nvar getOptions = function getOptions() {\n    var iconHeight = _index.config.iconHeight;\n    var proportion = _index.config.proportion;\n    var calculate = proportion.calculateContainer();\n\n    //横版模式\n    var isHorizontal = _index.config.layoutMode == 'horizontal';\n\n    proportion = isHorizontal ? proportion.width : proportion.height;\n    iconHeight = isIOS ? iconHeight : round(proportion * iconHeight);\n\n    return {\n        isHorizontal: isHorizontal,\n        iconHeight: iconHeight,\n        sWidth: calculate.width,\n        sHeight: calculate.height,\n        sTop: calculate.top,\n        sLeft: calculate.left,\n        calculate: calculate,\n        proportion: proportion\n    };\n};\n\n/**\r\n * 首页布局\r\n * @return {[type]} [description]\r\n */\nfunction home() {\n\n    var options = getOptions();\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n    var iconHeight = options.iconHeight;\n    var calculate = options.calculate;\n    var isHorizontal = options.isHorizontal;\n\n    var html = '';\n    var template = void 0;\n    var navBar = void 0;\n    var container = void 0;\n\n    //导航\n    html = '<div id=\"navBar\" class=\"xut-navBar\" style=\"' + 'width:{{width}};' + 'height:{{height}}px;' + 'top:{{top}};' + 'left:{{left}};' + 'bottom:{{bottom}};' + 'background-color:white;' + 'border-top:1px solid rgba(0,0,0,0.1);' + 'overflow:{{overflow}};' + '\"></div>';\n\n    navBar = _.template(html, {\n        width: isHorizontal ? '100%' : Math.min(sWidth, sHeight) / (isIOS ? 8 : 3) + 'px',\n        height: isHorizontal ? round(sHeight / ratio) : round((sHeight - iconHeight - TOP) * 0.96),\n        top: isHorizontal ? '' : iconHeight + TOP + 2 + 'px',\n        left: isHorizontal ? '' : iconHeight + 'px',\n        overflow: isHorizontal ? 'hidden' : 'visible',\n        bottom: isHorizontal ? '4px' : ''\n    });\n\n    //主体\n    html = '<div id=\"sceneHome\" class=\"xut-chapter\" style=\"' + 'width:{{width}}px;' + 'height:{{height}}px;' + 'top:{{top}}px;' + 'left:{{left}}px;' + 'overflow:hidden;' + 'z-index:{{index}};' + 'overflow:{{overflow}};\" >' + ' <div id=\"controlBar\" class=\"xut-controlBar hide\"></div>' +\n    //页面节点\n    ' <ul id=\"pageContainer\" class=\"xut-flip\"></ul>' +\n    //视觉差包装容器\n    ' <ul id=\"masterContainer\" class=\"xut-master xut-flip\"></ul>' +\n    //滑动菜单\n    ' {{navBar}}' +\n    //消息提示框\n    ' <div id=\"toolTip\"></div>' + '</div>';\n\n    return _.template(html, {\n        width: _index.config.viewSize.width,\n        height: _index.config.viewSize.height,\n        top: calculate.top,\n        left: calculate.left,\n        index: Xut.sceneController.createIndex(),\n        overflow: _index.config.scrollPaintingMode ? 'visible' : 'hidden',\n        navBar: navBar\n    });\n}\n\n/**\r\n * [scene 创建场景]\r\n * @param  {[type]} options [description]\r\n * @return {[type]}         [description]\r\n */\nfunction scene(id) {\n\n    var options = getOptions();\n\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n    var calculate = options.calculate;\n\n    var html = '<div id=\"{{id}}\" style=\"' + 'width:{{width}}px;' + 'height:{{height}}px;' + 'top:{{top}}px;' + 'left:{{left}}px;' + 'position:absolute;' + 'z-index:{{zIndex}};' + 'overflow:{{overflow}};' + '\">' + ' <ul id=\"{{pageId}}\" class=\"xut-flip\" style=\"z-index:{{zIndexPage}}\"></ul>' + ' <ul id=\"{{masterId}}\" class=\"xut-flip\" style=\"z-index:{{zIndexMaster}}\"></ul>' + '</div>';\n\n    return _.template(html, {\n        id: 'scenario-' + id,\n        width: _index.config.viewSize.width,\n        height: _index.config.viewSize.height,\n        top: calculate.top,\n        left: calculate.left,\n        zIndex: Xut.sceneController.createIndex(),\n        overflow: _index.config.scrollPaintingMode ? 'visible' : 'hidden',\n        pageId: 'scenarioPage-' + id,\n        zIndexPage: 2,\n        masterId: 'scenarioMaster-' + id,\n        zIndexMaster: 1\n    });\n}\n\nvar getNavOptions = function getNavOptions() {\n\n    //导航菜单宽高\n    var navHeight = void 0,\n        navWidth = void 0;\n    var options = getOptions();\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n    var proportion = options.proportion;\n    var isHorizontal = options.isHorizontal;\n\n    //横版模版\n    if (isHorizontal) {\n        navHeight = round(sHeight / ratio);\n    } else {\n        navWidth = Math.min(sWidth, sHeight) / (isIOS ? 8 : 3);\n        navHeight = round((sHeight - options.iconHeight - TOP) * 0.96);\n    }\n\n    return {\n        sWidth: sWidth,\n        sHeight: sHeight,\n        navHeight: navHeight,\n        navWidth: navWidth,\n        proportion: proportion\n    };\n};\n\n//获得css配置数据\nvar getWrapper = function getWrapper(seasonlist) {\n\n    var width = void 0,\n        height = void 0,\n        blank = void 0,\n        scroller = void 0,\n        contentstyle = void 0,\n        containerstyle = void 0,\n        overwidth = void 0,\n        overHeigth = void 0;\n\n    //获得css配置数据\n    var options = getNavOptions();\n    var font = round(options.proportion * 2);\n\n    var navWidth = options.navWidth;\n    var navHeight = options.navHeight;\n    var sWidth = options.sWidth;\n    var sHeight = options.sHeight;\n\n    if (_index.config.layoutMode == 'horizontal') {\n        height = round(navHeight * 0.9);\n        width = round(height * sWidth / sHeight); //保持缩略图的宽高比\n        blank = round(navHeight * 0.05); //缩略图之间的间距\n        scroller = 'width:' + seasonlist * (width + blank) + 'px>';\n        contentstyle = 'float:left;width:' + width + 'px;height:' + height + 'px;margin-left:' + blank + 'px';\n        containerstyle = 'width:96%;height:' + height + 'px;margin:' + blank + 'px auto;font-size:' + font + 'em';\n        //横版左右滑动\n        //溢出长度+上偏移量\n        overwidth = width * seasonlist + seasonlist * blank;\n    } else {\n        width = round(navWidth * 0.9);\n        height = round(navWidth * 1.1);\n        blank = round(navWidth * 0.05);\n        contentstyle = 'width:' + width + 'px;height:' + height + 'px;margin:' + blank + 'px auto;border-bottom:1px solid rgba(0,0,0,0.3)';\n        containerstyle = 'height:' + (navHeight - 4) + 'px;overflow:hidden;margin:2px auto;font-size:' + font + 'em';\n        //竖版上下滑动\n        overHeigth = height * seasonlist + seasonlist * blank;\n    }\n\n    return {\n        contentstyle: contentstyle,\n        containerstyle: containerstyle,\n        overwidth: overwidth,\n        overHeigth: overHeigth,\n        scroller: scroller\n    };\n};\n\n/**\r\n * [nav 导航菜单]\r\n * @param  {[type]} seasonSqlRet [description]\r\n * @return {[type]}              [description]\r\n */\nfunction nav(seasonSqlRet) {\n\n    var seasonId = void 0,\n        chapterId = void 0,\n        data = void 0,\n        xxtlink = void 0;\n    var seasonlist = seasonSqlRet.length;\n    var options = getWrapper(seasonlist);\n\n    var list = '';\n    var i = 0;\n\n    for (i; i < seasonlist; i++) {\n        data = seasonSqlRet[i];\n        seasonId = data.seasonId;\n        chapterId = data._id;\n        xxtlink = seasonId + '-' + chapterId;\n        list += '<li style=\"' + options.contentstyle + '\">';\n        list += '  <div class=\"xut-navBar-box\" data-xxtlink = \"' + xxtlink + '\">' + (i + 1) + '</div>';\n        list += '</li>';\n    }\n\n    //导航\n    var html = '<div id=\"SectionWrapper\" style=\"{{style}}\">' + '  <div id=\"Sectionscroller\" style=\"width:{{width}}px;height:{{height}}px;{{scroller}}\">' + '    <ul id=\"SectionThelist\">' + '       {{list}}' + '    </ul>' + '  </div>' + '</div>';\n\n    return _.template(html, {\n        style: options.containerstyle,\n        width: options.overwidth,\n        height: options.overHeigth,\n        scroller: options.scroller,\n        list: list\n    });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/scenario/layout.js\n ** module id = 44\n ** module chunks = 0\n **/"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;","sourceRoot":""}