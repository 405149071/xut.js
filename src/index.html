<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta content="email=no" name="format-detection" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>AppCarrier</title>
    <style type="text/css">
    * {
        touch-action: none;
    }

    button {
        border: 1px solid red;
        position: absolute;
        z-index: 99999
    }

    #closeMini {
        left: 100px;
    }
    </style>
    <script type="text/javascript" src="lib/external.js"></script>
</head>

<body>
    <button id="launchMini">加载新的图书</button>
    <button id="closeMini">关闭图书</button>
    <div id="xxtppt-app-container" class="xut-fullscreen xut-overflow-hidden"></div>
</body>

</html>
<script type="text/javascript">
Xut.Application.setConfig = {
    lauchMode: 1,
    platform: 'mini',
    historyMode: true,
    visualMode: 2,
    cursor: {
        url: 'images/icons/busyicon.gif',
        delayTime: 300
    },
    salePicture: true,
    salePictureMultiples: 3,
    // imageSuffix: {
    //     1080: 'mi',
    //     1440: 'hi'
    // },
    pageBar: {
        // type: 'circular',
        // mode: 1
        // position: {
        //     top: '90%',
        //     left: '20%'
        // }
    },
    trackCode: true,
    supportQR: true,
    swipeDelegate: true,
    useHDImageZoom: false
};

function openurl() {
    window.location.href = 'http://www.kidreadcool.com/downloads.php?esp=mios'
}


/**
 * 监听代码追踪
 * type:类型
 *   keepAppTime //应用运行时间
 *   keepPageTime //每个页面运行时间
 *   action => (包含，content的事件，action,audio,video,widget零件触发的事件)
 *
 *  options:参数
 *    keepAppTime => time 运行时间
 *    keepPageTime => time 运行时间
 *
 *    action => {
 *      appId  应用的id
 *      appName 应用标题
 *      id 元素的id
 *      type  触发的类型
 *      pageId 页面的id,对应数据库chapter ID
 *      eventName 事件名
 *    }
 *
 */
Xut.Application.Watch('trackCode', function(type, options) {
    switch (type) {
        case 'keepAppTime':
            break;
        case 'keepPageTime':
        // console.log(type,options)
            break;
        case 'action':
        console.log(type,options)
            break;
    }
})



var appId = 101
$("#launchMini").click(function() {
    Xut.Application.Launch({
        el: '#xxtppt-app-container', //根节点
        launchAnim: false, //关闭启动动画
        convert: 'svg', //转化资源svg转化成js
        path: {
            resource: 'content/' + appId,
            database: 'content/' + appId + '/SQLResult.js'
        }
    });
})
$("#launchMini").trigger('click')

$("#closeMini").click(function() {
    Xut.Application.Exit()
})
</script>
